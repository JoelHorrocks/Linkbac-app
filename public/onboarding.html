<!DOCTYPE html>
<html lang="en">

<!-- TODO: Fix reload breaking page -->

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Onboarding</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css"
    referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="onboarding.css" />
  <style>
    /* Add support for lime color */
    .bg-lime-700 {
      --tw-bg-opacity: 1;
      background-color: rgba(77, 124, 15, var(--tw-bg-opacity));
    }
    .text-lime-700 {
      --tw-text-opacity: 1;
      color: rgba(77, 124, 15, var(--tw-text-opacity));
    }

    .bg-lime-800 {
      --tw-bg-opacity: 1;
      background-color: rgba(69, 98, 18, var(--tw-bg-opacity));
    }
    .text-lime-800 {
      --tw-text-opacity: 1;
      color: rgba(69, 98, 18, var(--tw-text-opacity));
    }
    .hover\:bg-lime-800:hover {
      --tw-bg-opacity: 1;
      background-color: rgba(69, 98, 18, var(--tw-bg-opacity));
    }
  </style>
</head>

<body>
  <div class="flex flex-col items-center justify-center h-screen" id="screen-1">
    <div class="flex flex-col items-center justify-center w-1/2 h-1/2">
      <h1>
        <span class="font-heading tracking-tight md:text-6xl text-5xl font-bold">Welcome to </span>
        <span class="font-heading tracking-tight md:text-6xl text-5xl font-bold text-lime-700">Linkbac.app</span>
      </h1>
      <p class="text-xl font-medium text-gray-500">A Notion/Google Calendar/Google Sheets link for ManageBac</p>
      <p class="text-xl font-medium text-gray-700 pt-8">Which service would you like to link to?</p>
      <p class="text-m font-medium text-gray-500">You can change this later at any time if needed</p>
      <div class="flex flex-row items-center justify-center w-full h-1/2 py-12">
        <div class="flex flex-col items-center justify-center w-1/3 h-full">
          <span id="notion" class="cursor-pointer">
            <img src="https://img.icons8.com/color/96/000000/notion.png" class="ml-auto mr-auto" />
            <p class="text-lg font-medium text-gray-500 text-center">Notion</p>
          </span>
        </div>
        <div class="flex flex-col items-center justify-center w-1/3 h-full">
          <span id="google-sheets" class="cursor-pointer">
            <img src="https://img.icons8.com/color/96/000000/google-sheets.png" class="ml-auto mr-auto" />
            <p class="text-lg font-medium text-gray-500 text-center">Google Sheets</p>
          </span>
        </div>
        <!--<div class="flex flex-col items-center justify-center w-1/3 h-full">
          <span id="google-calendar" class="cursor-pointer">
            <img src="https://img.icons8.com/color/96/000000/google-calendar.png" class="ml-auto mr-auto" />
            <p class="text-lg font-medium text-gray-500 text-center">Google Calendar</p>
          </span>
        </div>-->
      </div>
      <button class="bg-lime-700 px-8 py-3 text-center rounded-full text-white opacity-50 cursor-default"
        id="next-screen-1" disabled>Get started</button>
    </div>
  </div>
  <div class="flex flex-col items-center justify-center h-screen" id="screen-2" style="display: none">
    <div class="flex flex-col items-center justify-center w-1/2 h-1/2">
      <h1>
        <span class="font-heading tracking-tight md:text-6xl text-5xl font-bold">Sign in to </span>
        <span class="font-heading tracking-tight md:text-6xl text-5xl font-bold text-lime-700">Linkbac.app</span>
      </h1>
      <p class="text-xl font-medium text-gray-500">A Notion/Google Calendar/Google Sheets link for ManageBac</p>
      <p class="text-xl font-medium text-gray-700 pt-8" id="sign-in-text">Sign in with your account to get started</p>
      <div class="flex flex-row items-center justify-center w-full h-1/2 py-12">
        <div class="flex flex-col items-center justify-center w-1/3 h-full">
          <span class="cursor-pointer" id="sign-in-notion" style="display: none">
            <img src="https://img.icons8.com/color/96/000000/notion.png" class="ml-auto mr-auto" />
            <p class="text-lg font-medium text-gray-500 text-center" id="notion-sign-in-button">Sign in</p>
          </span>
          <span class="cursor-pointer" id="sign-in-sheets" style="display: none">
            <img src="https://img.icons8.com/color/96/000000/google-sheets.png" class="ml-auto mr-auto" />
            <p class="text-lg font-medium text-gray-500 text-center" id="sheets-sign-in-button">Sign in</p>
          </span>
          <span class="cursor-pointer" id="sign-in-calendar" style="display: none">
            <img src="https://img.icons8.com/color/96/000000/google-calendar.png" class="ml-auto mr-auto" />
            <p class="text-lg font-medium text-gray-500 text-center" id="calendar-sign-in-button">Sign in</p>
        </div>
      </div>
      <button type="button"
        class="bg-lime-700 px-8 py-3 text-center rounded-full text-white opacity-50 cursor-default"
        id="next-screen-2" disabled>Continue</button>
    </div>
  </div>
  <div class="flex flex-col items-center justify-center h-screen" id="screen-3" style="display: none">
    <div class="flex flex-col items-center justify-center w-1/2 h-1/2">
      <h1>
        <span class="font-heading tracking-tight md:text-6xl text-5xl font-bold">Configure </span>
        <span class="font-heading tracking-tight md:text-6xl text-5xl font-bold text-lime-700">Linkbac.app</span>
      </h1>
      <p class="text-xl font-medium text-gray-500">A Notion/Google Calendar/Google Sheets link for ManageBac</p>
      <span id="notion-conditional" class="flex flex-col items-center justify-center" style="display: none;">
        <span id="custom-template-conditional" class="flex flex-col items-center justify-center">
          <p class="text-xl font-medium text-gray-700 pt-8">It doesn't look like you've used the provided template. Is
            your database set up in line with the template or will you be using a custom template?</p>
          <div class="flex items-center justify-center pt-4 space-x-4">
            <label class="flex items-center text-xl font-medium text-gray-700 cursor-pointer">
              <input type="radio" class="form-radio" name="template" id="notion-template">
              <span class="ml-2">Template</span>
            </label>
            <label class="flex items-center text-xl font-medium text-gray-700 cursor-pointer">
              <input type="radio" class="form-radio" name="template" id="custom-notion-database">
              <span class="ml-2">Custom database</span>
            </label>
          </div>

          <p class="text-xl font-medium text-gray-700 pt-8">Please input the database ID of your chosen Notion database
            to link (?)</p>
          <input type="text" id="notion-database-id" name="notion-database-id" placeholder="Database ID">
        </span>
        <p class="text-xl font-medium text-gray-700 pt-8">Class mapping (?)</p>
        <p class="text-m font-medium text-gray-500">Please input the class names as they appear in ManageBac and the
          corresponding Notion page name</p>
        <button class="px-4 py-2 mt-8 font-medium text-white bg-blue-500 rounded-md hover:bg-blue-600"
          id="class-mapping">Class mapping</button>
      </span>
      <span id="sheets-conditional" style="display: none;">
        <!-- Spreadsheet ID -->
        <p class="text-xl font-medium text-gray-700 pt-8">Please input the spreadsheet ID of your chosen Google Sheets
          spreadsheet (?)</p>
          <p class="text-m font-medium text-gray-500">To give the extension permission to view the chosen spreadsheet, 
            and to get the spreadsheet ID, please find your spreadsheet in <a href="https://drive.google.com" target="_blank" class="text-blue-500">Google Drive</a>,
            right click on it, open the "Open With" menu and click "Link for MB". The extension will be given permsision to view the sheet
            and a page will open showing the ID.</p>
        <input type="text" id="sheets-spreadsheet-id" name="sheets-spreadsheet-id" placeholder="Spreadsheet ID">
        <!-- Sheet name -->
        <span id="sheet-name-conditional" style="display: none;">
          <p class="text-xl font-medium text-gray-700 pt-8">Please input the sheet name of your chosen Google Sheets
            spreadsheet to link (?)</p>
          <input type="text" id="sheets-spreadsheet-name" name="sheets-spreadsheet-name" placeholder="Sheet name">
        </span>
        <!-- Show preview of sheet + ask user where new values should be inputted -->
        <p class="text-xl font-medium text-gray-700 pt-8">Preview of spreadsheet (?)</p>
        <p class="text-m font-medium text-gray-500">Please give each column of your spreadsheet header titles in the top row, then select what this extension should put in each column below</p>
        <p class="text-m font-medium text-gray-500">An 'ID' column must be included so the extension can keep track of tasks correctly</p>
        <table id="sheet-table" class="spreadsheet">
        </table>
        <p id="sheet-table-error" class="text-m font-medium text-red-500">Please enter spreadsheet ID</p>
        <!-- loading -->
        <svg class="animate-spin h-10 w-10 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 100 100" id="sheets-loader" style="display: none;">
          <path fill="#000" d="M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50">
        </svg>
        <button id="refresh-sheet" class="px-4 py-2 mt-8 font-medium text-white bg-blue-500 rounded-md hover:bg-blue-600">Refresh</button>
      </span>
      <button type="button"
      class="bg-lime-700 px-8 py-3 text-center rounded-full text-white opacity-50 cursor-default"
      id="next-screen-3" disabled>Continue</button>
    </div>
  </div>
  <!-- Screen 4 (success screen with some advice on where to go for help) -->
  <div class="flex flex-col items-center justify-center h-screen" id="screen-4" style="display: none">
    <div class="flex flex-col items-center justify-center w-1/2 h-1/2">
      <h1>
        <span class="font-heading tracking-tight md:text-6xl text-5xl font-bold text-lime-700">Success!</span>
      </h1>
      <p class="text-xl font-medium text-gray-700 pt-8">You're all set up. You can now use the extension to add
        tasks and events to your Notion, Google Calendar or Google Sheets. You may need to refresh any currently open
        ManageBac tabs for the extension to work.</p>
      <p class="text-xl font-medium text-gray-700 pt-8">If you have any questions, please contact me at <a
          href="mailto:linkformb@cookiejarapps.com" class="text-blue-500">linkformb@cookiejarapps.com</a>.</p>
    </div>
  </div>

  <!-- class mapping modal -->

  <div class="fixed inset-0 z-10 overflow-y-auto" aria-labelledby="modal-title" role="dialog" aria-modal="true"
    id="class-mapping-modal" style="display: none">
    <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
      <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" aria-hidden="true"></div>
      <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>
      <div
        class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"
        role="dialog" aria-modal="true" aria-labelledby="modal-title">
        <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
          <div class="sm:flex sm:items-start">
            <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left">
              <h3 class="text-lg leading-6 font-medium text-gray-900" id="modal-title">
                Class mapping
              </h3>
              <div class="mt-2">
                <p class="text-sm text-gray-500">
                  Please input the class names as they appear in ManageBac and the corresponding Notion page name
                </p>

                <div id="mappings"></div>
                <input id="class"><input id="class-value"><button id="map">Map class name</button>
              </div>
            </div>
          </div>
        </div>
        <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
          <button type="button"
            class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-500 text-base font-medium text-white hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm"
            id="add-class-mapping">
            Save
          </button>
          <button type="button"
            class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"
            id="close-class-mapping-modal">
            Cancel
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- end class mapping modal -->

  <script src="onboarding.js"></script>
</body>